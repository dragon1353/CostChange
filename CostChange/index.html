<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>台幣外幣匯率查詢工具</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="container">
        <h1><i class="fas fa-search-dollar"></i> 台幣外幣匯率查詢工具</h1>
        
        <div class="status-report-section">
            <h2>執行狀態</h2>
            <div id="statusBox">閒置</div>
        </div>

        <div class="functional-block">
            <h2>即時查詢</h2>
            <div class="input-group sub-block">
                <label for="currencySelector">選擇查詢外幣</label>
                <select id="currencySelector" class="form-control">
                    <option value="JPY">JPY - 日幣</option>
                    <option value="USD">USD - 美金</option>
                    <option value="CNY">CNY - 人民幣</option>
                    <option value="EUR">EUR - 歐元</option>
                    <option value="HKD">HKD - 港幣</option>
                    <option value="GBP">GBP - 英鎊</option>
                    <option value="AUD">AUD - 澳幣</option>
                    <option value="CAD">CAD - 加拿大幣</option>
                    <option value="SGD">SGD - 新加坡幣</option>
                    <option value="CHF">CHF - 瑞士法郎</option>
                    <option value="THB">THB - 泰幣</option>
                    <option value="KRW">KRW - 韓元</option>
                </select>
            </div>
            <div class="button-container">            
                <button id="findNearestBtn" class="btn btn-primary"><i class="fas fa-map-marked-alt"></i> 智慧查詢最佳分行</button>
                <button id="geminiAnalysisBtn" class="btn btn-indigo"><i class="fas fa-brain"></i> Gemini 趨勢分析</button>
            </div>

            <div id="rateConverter" class="sub-block" style="display: none; margin-top: 20px;">
                <h4><i class="fas fa-calculator"></i> TWD 即時換算</h4>
                <div class="converter-grid">
                    <div>
                        <label for="twdAmount">輸入台幣 (TWD) 金額</label>
                        <input type="number" id="twdAmount" class="form-control" placeholder="請在此輸入金額...">
                    </div>
                    <div class="converter-result">
                        <label>可兌換 <span id="foreignCurrencyLabel"></span> 約</label>
                        <p id="convertedAmount">0.00</p>
                    </div>
                </div>
                <small id="converterRateInfo" style="display: block; margin-top: 10px; color: #888;">請先點擊「查詢匯率列表」以載入最優惠匯率。</small>
            </div>
        </div>

        <div class="functional-block">
            <h2>歷史走勢圖</h2>
            <div class="sub-block" id="chartOptions">
                
                <div class="quick-date-buttons">
                    <button id="btn3Months" class="btn btn-outline">最近三個月</button>
                    <button id="btn6Months" class="btn btn-outline">最近半年</button>
                </div>
                
                <div class="date-range-picker">
                    <div>
                        <label for="startDate">或自訂起始日期</label>
                        <input type="date" id="startDate" class="form-control"  min="">
                    </div>
                    <div>
                        <label for="endDate">結束日期</label>
                        <input type="date" id="endDate" class="form-control">
                    </div>
                </div>              
            </div>
            <div class="button-container">
                <button id="getChartBtn" class="btn btn-success"><i class="fas fa-chart-line"></i> 產生歷史走勢圖</button>
            </div>
        </div>

        <div class="status-report-section">
            <h2>查詢結果</h2>
            <div id="reportContainer" class="report-container">
                <canvas id="rateChart" style="display: none; height: 400px; width: 100%;"></canvas>
                <p id="placeholderText" class='placeholder-text'>此處將顯示查詢結果</p>
            </div>
        </div>
    </div>
    <style>
        .form-control { width: 100%; padding: 10px; box-sizing: border-box; background-color: #333; color: #e0e0e0; border: 1px solid #555; border-radius: 5px; font-size: 1em; margin-top: 5px; }
        th.sortable { cursor: pointer; position: relative; }
        th.sortable:hover { background-color: #3f3f3f; }
        th.sortable::after { content: ' \2195'; position: absolute; right: 8px; opacity: 0.4; }
        th.sort-asc::after { content: ' \25B2'; opacity: 1; }
        th.sort-desc::after { content: ' \25BC'; opacity: 1; }
        
        /* 日期選擇器樣式 */
        .date-range-picker { display: flex; gap: 20px; margin-top: 15px; }
        .date-range-picker > div { flex: 1; }
        
        /* *** 新增快捷按鈕的樣式 *** */
        .quick-date-buttons { display: flex; gap: 10px; margin-bottom: 15px; border-bottom: 1px solid #444; padding-bottom: 15px; }
        .btn.btn-outline { background-color: transparent; border: 1px solid #555; color: #ccc; }
        .btn.btn-outline:hover { background-color: #3f3f3f; border-color: #777; }

        .converter-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
            align-items: end;
        }
        .converter-result p {
            font-size: 2em;
            font-weight: bold;
            color: #87CEEB;
            margin: 0;
            padding-bottom: 5px;
        }

    </style>
    <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>